recipes:
  - name: "while"
    description: "A simple demo of the while loop control flow"
    category: "demo"
    operations:
      - name: "Initialize Status"
        id: "status"
        command: echo "running"
        silent: true

      - name: "Loop While Status is Running"
        control_flow:
          type: "while"
          condition: '{{ contains .status "running" }}'
        operations:
          - name: "Perform Work"
            id: "perform_work"
            command: echo {{ color "yellow" "Service is running, performing work..." }}

          - name: "Check Status"
            id: "status"
            command: sleep 1
            transform: "{{ if eq .iteration 3 }}stopped{{ else }}running{{ end }}"
            silent: true

      - name: "Show Completion"
        command: echo {{ color "green" "While loop finished - service is no longer running!" }}
