recipes:
  - name: "lint"
    description: "Run basic lint for all staged and unstaged files"
    category: "git"
    operations:
      - uses: "git.staged"
        id: "staged"
        silent: true

      - uses: "git.unstaged"
        id: "unstaged"
        silent: true

      - uses: "list.combine"
        id: "files"
        with:
          list_a: "{{ .staged }}"
          list_b: "{{ .unstaged }}"
        silent: true

      - control_flow:
          type: "foreach"
          collection: "{{ .files }}"
          as: "file_to_lint"
          progress_mode: true
        operations:
          - command: 'echo "Linting: {{ style "dim" .file_to_lint }}"'

          - uses: "lint.trailing"
            with:
              file: "{{ .file_to_lint }}"
